import{o as ze,i as Me,a as u}from"./lifecycle.Bl0-0ysm.js";import{Q as Be,R as p,a1 as U,W as r,Y as i,d as e,p as V,Z as o,U as d,V as Ce,X as _,S as w,_ as y,a0 as re,T as c,a3 as oe,a8 as He}from"./render.3hSXMDmx.js";import{s as A}from"./attributes.D0QCp8P6.js";import{s as Ve}from"./class.0LOf1YHh.js";import{A as Le}from"./api.BgmQpvyL.js";/* empty css                                                        */var We=p('<p class="text-green-100 text-sm mt-1"> </p>'),Ie=p('<div class="flex items-center justify-center py-8"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"></div> <span class="ml-2 text-gray-600 dark:text-gray-300">加载中...</span></div>'),Ee=p('<div class="text-center py-8"><p class="text-red-500 mb-4"> </p> <button class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition-colors">重新加载</button></div>'),De=p('<div class="w-full h-64 bg-gray-200 dark:bg-gray-700 animate-pulse rounded-lg flex items-center justify-center"><svg class="w-12 h-12 text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"></path></svg></div>'),Re=p('<p class="text-sm text-green-600 dark:text-green-400 font-medium"> </p>'),Ue=p('<div class="bg-gray-50 dark:bg-gray-700 p-3 rounded-lg"><p class="text-sm text-gray-700 dark:text-gray-300 leading-relaxed"> </p></div>'),Ae=p('<div class="bg-blue-50 dark:bg-blue-900 p-3 rounded-lg"><h4 class="text-blue-800 dark:text-blue-200 font-medium mb-2 flex items-center gap-2"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg> 详细介绍</h4> <p class="text-sm text-blue-700 dark:text-blue-300 leading-relaxed"> </p></div>'),Fe=p('<div class="text-xs text-gray-500 dark:text-gray-400 flex items-center gap-2"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg> <span> </span></div>'),Se=p('<div class="relative mb-4 group"><div class="relative overflow-hidden rounded-lg"><!> <button type="button" aria-label="查看壁纸大图"><img class="w-full h-full object-cover svelte-7hdbv4" loading="lazy"/></button> <div class="absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity"><button class="bg-black bg-opacity-50 hover:bg-opacity-75 text-white p-2 rounded-full transition-colors" title="查看大图" aria-label="查看大图"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"></path></svg></button> <button class="bg-black bg-opacity-50 hover:bg-opacity-75 text-white p-2 rounded-full transition-colors" title="下载壁纸" aria-label="下载壁纸"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></button></div> <div class="absolute bottom-2 left-2 bg-black bg-opacity-50 text-white px-2 py-1 rounded text-xs opacity-0 group-hover:opacity-100 transition-opacity">点击查看大图</div></div></div> <div class="space-y-3"><div><h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1"> </h3> <!></div> <!> <!> <!></div> <div class="flex gap-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-600"><button class="flex-1 bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-lg transition-colors flex items-center justify-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> 下载壁纸</button> <button class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg transition-colors flex items-center justify-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> 设为壁纸</button></div> <div class="flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 pt-4 mt-4 border-t border-gray-200 dark:border-gray-600"><span>数据来源：必应官方</span> <span>每日更新</span></div>',1),Te=p('<p class="text-sm opacity-75"> </p>'),Oe=p('<div class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-label="壁纸全屏预览" tabindex="-1"><div class="relative max-w-7xl max-h-full"><img class="max-w-full max-h-full object-contain rounded-lg svelte-7hdbv4"/> <button class="absolute top-4 right-4 bg-black bg-opacity-50 hover:bg-opacity-75 text-white p-3 rounded-full transition-colors" aria-label="关闭全屏预览"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button> <button class="absolute top-4 left-4 bg-black bg-opacity-50 hover:bg-opacity-75 text-white p-3 rounded-full transition-colors" aria-label="下载壁纸"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></button> <div class="absolute bottom-4 left-4 right-4 bg-black bg-opacity-50 text-white p-4 rounded-lg"><h3 class="font-semibold mb-1"> </h3> <!></div></div></div>'),Pe=p('<div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden"><div class="bg-gradient-to-r from-green-500 to-teal-600 text-white p-4"><h2 class="text-xl font-bold flex items-center gap-2"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"></path></svg> 必应每日壁纸</h2> <!></div> <div class="p-4"><!></div></div> <!>',1);function Qe(L,W){Be(W,!1);let t=V(null),F=V(!0),j=V(""),S=V(!1),I=V(!1);async function q(){try{_(F,!0),_(j,""),_(I,!1);const a=await Le.getBingWallpaper();if(a&&a.title&&a.cover)_(t,a);else throw new Error("Invalid wallpaper data received")}catch(a){console.error("Failed to load wallpaper:",a),_(j,"API服务暂时不可用，正在尝试备用服务器..."),setTimeout(()=>{e(j)&&_(j,"壁纸数据加载失败，请检查网络连接或稍后重试")},3e3)}finally{_(F,!1)}}function z(){_(S,!e(S))}async function T(){if(e(t)?.cover)try{const n=await(await fetch(e(t).cover)).blob(),b=window.URL.createObjectURL(n),v=document.createElement("a");v.href=b,v.download=`bing-wallpaper-${e(t).update_date.replace(/\//g,"-")}.jpg`,document.body.appendChild(v),v.click(),document.body.removeChild(v),window.URL.revokeObjectURL(b)}catch(a){console.error("Download failed:",a),window.open(e(t).cover,"_blank")}}function le(){e(t)?.cover&&("setDesktopWallpaper"in window?window.setDesktopWallpaper(e(t).cover):alert('请右键点击图片并选择"设为桌面背景"'))}function ie(a){return a.replace(/\//g,"-")}function se(){_(I,!0)}ze(()=>{q()}),Me();var G=Pe(),O=U(G),P=r(O),ne=i(r(P),2);{var de=a=>{var n=We(),b=r(n);o(n),w(v=>y(b,`${v??""} 更新`),[()=>ie(e(t).update_date)]),d(a,n)};u(ne,a=>{e(t)&&a(de)})}o(P);var J=i(P,2),ve=r(J);{var ce=a=>{var n=Ie();d(a,n)},pe=a=>{var n=re(),b=U(n);{var v=f=>{var h=Ee(),m=r(h),C=r(m,!0);o(m);var k=i(m,2);o(h),w(()=>y(C,e(j))),c("click",k,q),d(f,h)},E=f=>{var h=re(),m=U(h);{var C=k=>{var D=Se(),x=U(D),M=r(x),R=r(M);{var be=l=>{var s=De();d(l,s)};u(R,l=>{e(I)||l(be)})}var B=i(R,2),Q=r(B);o(B);var K=i(B,2),N=r(K),fe=i(N,2);o(K),oe(2),o(M),o(x);var X=i(x,2),Y=r(X),Z=r(Y),he=r(Z,!0);o(Z);var me=i(Z,2);{var xe=l=>{var s=Re(),g=r(s,!0);o(s),w(()=>y(g,e(t).headline)),d(l,s)};u(me,l=>{e(t).headline&&e(t).headline!==e(t).title&&l(xe)})}o(Y);var $=i(Y,2);{var _e=l=>{var s=Ue(),g=r(s),H=r(g,!0);o(g),o(s),w(()=>y(H,e(t).description)),d(l,s)};u($,l=>{e(t).description&&l(_e)})}var ee=i($,2);{var we=l=>{var s=Ae(),g=i(r(s),2),H=r(g,!0);o(g),o(s),w(()=>y(H,e(t).main_text)),d(l,s)};u(ee,l=>{e(t).main_text&&e(t).main_text!==e(t).description&&l(we)})}var ye=i(ee,2);{var ke=l=>{var s=Fe(),g=i(r(s),2),H=r(g,!0);o(g),o(s),w(()=>y(H,e(t).copyright)),d(l,s)};u(ye,l=>{e(t).copyright&&l(ke)})}o(X);var te=i(X,2),ae=r(te),je=i(ae,2);o(te),oe(2),w(()=>{Ve(B,1,`w-full h-64 rounded-lg overflow-hidden cursor-pointer transition-transform duration-300 group-hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500
              ${e(I)?"opacity-100":"opacity-0 absolute inset-0"}`),A(Q,"src",e(t).cover),A(Q,"alt",e(t).title),y(he,e(t).title)}),c("load",Q,se),c("click",B,z),c("keydown",B,l=>l.key==="Enter"&&z()),c("click",N,z),c("click",fe,T),c("click",ae,T),c("click",je,le),d(k,D)};u(m,k=>{e(t)&&k(C)},!0)}d(f,h)};u(b,f=>{e(j)?f(v):f(E,!1)},!0)}d(a,n)};u(ve,a=>{e(F)?a(ce):a(pe,!1)})}o(J),o(O);var ue=i(O,2);{var ge=a=>{var n=Oe(),b=r(n),v=r(b),E=i(v,2),f=i(E,2),h=i(f,2),m=r(h),C=r(m,!0);o(m);var k=i(m,2);{var D=x=>{var M=Te(),R=r(M,!0);o(M),w(()=>y(R,e(t).copyright)),d(x,M)};u(k,x=>{e(t).copyright&&x(D)})}o(h),o(b),o(n),w(()=>{A(v,"src",e(t).cover),A(v,"alt",e(t).title),y(C,e(t).title)}),c("click",E,z),c("click",f,T),c("click",n,z),c("keydown",n,x=>x.key==="Escape"&&z()),d(a,n)};u(ue,a=>{e(S)&&e(t)?.cover&&a(ge)})}d(L,G),Ce()}function Xe(){const L=document.getElementById("wallpaper-container"),W=document.getElementById("loading-state");L&&W&&(W.style.display="none",He(Qe,{target:L}))}setTimeout(()=>{Xe()},100);
